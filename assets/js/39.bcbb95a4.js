(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{363:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"volatileå…³é”®å­—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volatileå…³é”®å­—"}},[t._v("#")]),t._v(" Volatileå…³é”®å­—")]),t._v(" "),s("h2",{attrs:{id:"è®²è®²cpuç¼“å­˜æ¨¡å‹-ä¸ºä»€ä¹ˆè¦å¼„ä¸€ä¸ªcpué«˜é€Ÿç¼“å­˜å‘¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è®²è®²cpuç¼“å­˜æ¨¡å‹-ä¸ºä»€ä¹ˆè¦å¼„ä¸€ä¸ªcpué«˜é€Ÿç¼“å­˜å‘¢"}},[t._v("#")]),t._v(" è®²è®²CPUç¼“å­˜æ¨¡å‹ï¼Ÿä¸ºä»€ä¹ˆè¦å¼„ä¸€ä¸ªCPUé«˜é€Ÿç¼“å­˜å‘¢ï¼Ÿ")]),t._v(" "),s("p",[t._v("CPU Cacheç¼“å­˜æ˜¯ä¸ºäº†è§£å†³CPUå¤„ç†é€Ÿåº¦å’Œå†…å­˜å¤„ç†é€Ÿåº¦ä¸å¯¹ç­‰çš„é—®é¢˜ï¼Œå†…å­˜ç¼“å­˜ç”¨äºè§£å†³ç¡¬ç›˜è®¿é—®é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼ŒCPUç¼“å­˜ç”¨äºè§£å†³å†…å­˜è®¿é—®æ…¢çš„é—®é¢˜ã€‚")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://raw.githubusercontent.com/zouquchen/Images/main/imgs/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B2.png",alt:"image-20220303112745947"}}),t._v(" "),s("p",[t._v("CPU Cacheå·¥ä½œæ–¹å¼ï¼š")]),t._v(" "),s("p",[t._v("å…ˆè¯»å–ä¸€ä»½æ•°æ®åˆ°CPU Cacheï¼Œå½“CPUéœ€è¦ç”¨åˆ°çš„æ—¶å€™ç›´æ¥ä»CPU Cacheä¸­è¯»å–æ•°æ®ï¼Œå½“è¿ç®—å®Œæˆåï¼Œå†å°†è¿ç®—å¾—åˆ°çš„æ•°æ®å†™å›Main Memoryä¸­ã€‚ä½†ä¼šå‡ºç°"),s("strong",[t._v("å†…å­˜ç¼“å­˜ä¸ä¸€è‡´")]),t._v("çš„é—®é¢˜ã€‚æ¯”å¦‚ï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œi++æ“ä½œï¼Œä¸¤ä¸ªçº¿ç¨‹åŒæ—¶ä»CPU Cacheä¸­è¯»å–åˆ°i=1ï¼Œä¸¤ä¸ªçº¿ç¨‹åšäº†1++è¿ç®—å®Œåå†å†™å›Memoryåi=2ï¼Œè€Œæ­£ç¡®ç»“æœåº”è¯¥æ˜¯i=3ã€‚")]),t._v(" "),s("h2",{attrs:{id:"è®²è®²jmm-java-memory-model-javaå†…å­˜æ¨¡å‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è®²è®²jmm-java-memory-model-javaå†…å­˜æ¨¡å‹"}},[t._v("#")]),t._v(" è®²è®²JMMï¼ˆJava Memory Modelï¼ŒJavaå†…å­˜æ¨¡å‹ï¼‰ï¼Ÿ")]),t._v(" "),s("p",[t._v("æ˜¯ä¸€ç§æŠ½è±¡æ¦‚å¿µï¼Œå¹¶ä¸çœŸå®å­˜åœ¨ï¼Œå®ƒæè¿°çš„æ˜¯ä¸€ç»„è§„åˆ™æˆ–è§„èŒƒã€‚")]),t._v(" "),s("p",[t._v("Javaå†…å­˜æ¨¡å‹æŠ½è±¡äº†çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´çš„å…³ç³»ï¼Œæ¯”å¦‚çº¿ç¨‹ä¹‹é—´å…±äº«å˜é‡å¿…é¡»å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ã€‚Javaå†…å­˜æ¨¡å‹ä¸»è¦ç›®çš„æ˜¯å±è”½ç³»ç»Ÿå’Œç¡¬ä»¶å·®å¼‚ï¼Œé¿å…åŒä¸€å¥—ä»£ç åœ¨ä¸åŒçš„å¹³å°äº§ç”Ÿä¸ä¸€è‡´ã€‚")]),t._v(" "),s("p",[t._v("JMMå…³äºåŒæ­¥çš„è§„å®šï¼š")]),t._v(" "),s("p",[t._v("1 çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡çš„å€¼åˆ·æ–°å›ä¸»å†…å­˜ã€‚")]),t._v(" "),s("p",[t._v("2 çº¿ç¨‹åŠ é”å‰ï¼Œå¿…é¡»è¯»å–ä¸»å†…å­˜çš„æœ€æ–°å€¼åˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜ã€‚")]),t._v(" "),s("p",[t._v("3 æ·é”è§£é”æ˜¯åŒä¸€æŠŠé”ã€‚")]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"https://raw.githubusercontent.com/zouquchen/Images/main/imgs/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.png",alt:"image-20220303113301148"}}),t._v(" "),s("p",[t._v("çº¿ç¨‹å¯ä»¥æŠŠå˜é‡ä¿å­˜åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨ä¸»å†…å­˜ä¸­è¿›è¡Œè¯»å†™ã€‚è¿™å°±å¯èƒ½é€ æˆäº†ä¸€ä¸ªçº¿ç¨‹åœ¨ä¸»å†…å­˜ä¸­ä¿®æ”¹äº†ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹è¿˜ç»§ç»­ä½¿ç”¨å®ƒåœ¨æœ¬åœ°å†…å­˜ä¸­çš„æ—§å€¼ï¼Œé€ æˆæ•°æ®çš„ä¸ä¸€è‡´ã€‚")]),t._v(" "),s("blockquote",[s("p",[t._v("ä¸»å†…å­˜ï¼šæ‰€æœ‰çº¿ç¨‹åˆ›å»ºçš„å®ä¾‹å¯¹è±¡éƒ½å­˜æ”¾åœ¨ä¸»å†…å­˜ä¸­ï¼Œä¸ç®¡è¯¥å®ä¾‹å¯¹è±¡æ˜¯æˆå‘˜å˜é‡è¿˜æ˜¯æ–¹æ³•ä¸­çš„æœ¬åœ°å˜é‡ã€‚")]),t._v(" "),s("p",[t._v("æœ¬åœ°å†…å­˜ï¼šæ¯ä¸ªçº¿ç¨‹ç§æœ‰çš„æœ¬åœ°å†…å­˜æ¥å­˜å‚¨å…±äº«å˜é‡å’Œå‰¯æœ¬ï¼Œ å¹¶ä¸”ï¼Œæ¯ä¸ªçº¿ç¨‹åªèƒ½è®¿é—®è‡ªå·±çš„æœ¬åœ°å†…å­˜ï¼Œæ— æ³•è®¿é—®å…¶ä»–çº¿ç¨‹çš„æœ¬åœ°å†…å­˜ã€‚æœ¬åœ°å†…å­˜æ˜¯JMMæŠ½è±¡å‡ºæ¥çš„æ¦‚å¿µï¼Œå­˜å‚¨äº†ä¸»å†…å­˜ä¸­çš„å…±äº«å˜é‡å‰¯æœ¬ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜-å¦‚ä½•è§£å†³"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜-å¦‚ä½•è§£å†³"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ")]),t._v(" "),s("p",[t._v("é€šå¸¸ç§°è¿™ç§è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„å˜é‡ä¸ºå…±äº«å˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå˜é‡åœ¨å¤šä¸ªCPUä¸­éƒ½å­˜åœ¨ç¼“å­˜ï¼ˆä¸€èˆ¬å¤šçº¿ç¨‹æ—¶æ‰ä¼šå‡ºç°ï¼‰ï¼Œå°±å¯èƒ½å‡ºç°ç¼“å­˜ä¸ä¸€è‡´çš„é—®é¢˜ã€‚")]),t._v(" "),s("p",[t._v("è§£å†³æ–¹æ¡ˆï¼š")]),t._v(" "),s("ol",[s("li",[t._v("é€šè¿‡åœ¨æ€»çº¿ä¸ŠåŠ é”çš„æ–¹å¼ï¼Œä½¿åªèƒ½ç”±ä¸€ä¸ªCPUè®¿é—®è¯¥å˜é‡çš„å†…å­˜ï¼Œåªæœ‰ç­‰å¾…è¿™æ®µä»£ç æ‰§è¡Œå®Œä¹‹åï¼ŒCPUæ‰èƒ½ä»è¿™ä¸ªå˜é‡ä¸­è¯»å–å€¼ã€‚")]),t._v(" "),s("li",[t._v("ç¼“å­˜ä¸€è‡´åè®®ï¼Œæ¯ä¸ªç¼“å­˜ä¸­ä½¿ç”¨å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚å½“CPUå‘å†…å­˜å†™å…¥æ•°æ®æ—¶ï¼Œå¦‚æœå‘ç°æ“ä½œçš„å˜é‡æ˜¯å…±äº«å˜é‡ï¼Œå°±ä¼šä½¿å…¶ä»–å‰¯æœ¬ä¸­è¯¥å˜é‡çš„ç¼“å­˜è¡Œç½®ä¸ºæ— æ•ˆçŠ¶æ€ï¼Œå½“å…¶ä»–CPUéœ€è¦è¯»å–æ•´ä¸ªå˜é‡æ—¶ï¼Œå‘ç°è‡ªå·±ç¼“å­˜ä¸­è¯¥å˜é‡çš„ç¼“å­˜è¡Œæ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¹ˆå°±ä¼šä»å†…å­˜ä¸­é‡æ–°è¯»å–ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"å¹¶å‘ç¼–ç¨‹çš„ä¸‰ä¸ªé‡è¦ç‰¹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¹¶å‘ç¼–ç¨‹çš„ä¸‰ä¸ªé‡è¦ç‰¹æ€§"}},[t._v("#")]),t._v(" å¹¶å‘ç¼–ç¨‹çš„ä¸‰ä¸ªé‡è¦ç‰¹æ€§ï¼Ÿ")]),t._v(" "),s("ol",[s("li",[s("strong",[t._v("åŸå­æ€§")]),t._v("ï¼šä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¹¶ä¸”ä¸å—ä»»ä½•å› ç´ çš„å¹²æ‰°è€Œä¸­æ–­ï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚synchronizedä¿è¯ä»£ç ç‰‡æ®µçš„åŸå­æ€§ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("å¯è§æ€§")]),t._v("ï¼šå½“ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡è¿›è¡Œäº†ä¿®æ”¹ï¼Œé‚£ä¹ˆå¦å¤–çš„çº¿ç¨‹éƒ½æ˜¯ç«‹å³å¯ä»¥çœ‹åˆ°ä¿®æ”¹åçš„æœ€æ–°å€¼ã€‚volatileå…³é”®å­—å¯ä»¥ä¿è¯å…±äº«å˜é‡çš„å¯è§æ€§ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æœ‰åºæ€§")]),t._v("ï¼šä»£ç åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­çš„å…ˆåé¡ºåºï¼ŒJavaåœ¨ç¼–è¯‘å™¨ä»¥åŠè¿è¡ŒæœŸé—´çš„ä¼˜åŒ–ï¼Œä»£ç æ‰§è¡Œé¡ºåºæœªå¿…å°±æ˜¯ç¼–å†™ä»£ç æ—¶å€™çš„é¡ºåºã€‚volatileå…³é”®å­—å¯ä»¥ç´§å¼ æŒ‡ä»¤è¿›è¡Œé‡æ‹ä¼˜åŒ–ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"volatileå…³é”®å­—çš„ä½œç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volatileå…³é”®å­—çš„ä½œç”¨"}},[t._v("#")]),t._v(" volatileå…³é”®å­—çš„ä½œç”¨ï¼Ÿ")]),t._v(" "),s("p",[t._v("æ˜¯Javaè™šæ‹Ÿæœºæä¾›çš„"),s("strong",[t._v("è½»é‡çº§çš„åŒæ­¥æœºåˆ¶")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("ä¿è¯æ“ä½œçš„å¯è§æ€§ã€æœ‰åºæ€§ï¼ˆç¦æ­¢æŒ‡ä»¤é‡æ’ï¼‰ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("å¯è§æ€§ï¼šå½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çš„çº¿ç¨‹èƒ½ç«‹åˆ»çœ‹åˆ°ä¿®æ”¹çš„å€¼ã€‚")])]),t._v(" "),s("blockquote",[s("p",[t._v("ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ•°æ®éƒ½æ˜¯æ”¾åœ¨ä¸»å­˜ï¼ˆç‰©ç†å†…å­˜ï¼‰ä¸­ï¼ŒCPUæ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼Œä»å†…å­˜ä¸­è¯»å†™æ•°æ®ä¼šå¤§å¤§é™ä½æ•ˆç‡ã€‚å› æ­¤ï¼ŒCPUæœ‰äº†é«˜é€Ÿç¼“å­˜ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œä¼šå°†è¿ç®—éœ€è¦çš„æ•°æ®ä»ä¸»å­˜ä¸­å¤åˆ¶åˆ°CPUé«˜é€Ÿç¼“å­˜ä¸­ï¼ŒCPUæ‰§è¡Œè¿ç®—æ—¶å°±å¯ä»¥ä»é«˜é€Ÿç¼“å­˜ä¸­è¯»å†™æ•°æ®ï¼Œå½“ç¨‹åºè¿ç®—å®Œå†å­˜å‚¨åˆ°ä¸»å­˜ä¸­ã€‚")]),t._v(" "),s("p",[t._v("å•çº¿ç¨‹æƒ…å†µä¸‹ä¸ä¼šå‡ºç°ä»»ä½•é—®é¢˜ï¼›åœ¨å¤šæ ¸CPUä¸­ï¼Œæ¯æ¡çº¿ç¨‹è¿è¡Œåœ¨ä¸åŒCPUä¸­ï¼Œæœ‰ä¸åŒçš„é«˜é€Ÿç¼“å­˜ï¼Œå½“ä»–ä»¬è¯»å–å…¬å…±æ•°æ®è¿›è¡Œæ“ä½œæ—¶ï¼Œæ²¡æœ‰åŠæ—¶å°†æ•°æ®æ›´æ–°åˆ°ä¸»å­˜ä¸­å¯¼è‡´å‡ºç°ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚")]),t._v(" "),s("p",[t._v("é€šè¿‡Volatileå…³é”®å­—ï¼Œå¯ä»¥å°†ä¿®æ”¹çš„å˜é‡ä»é«˜é€Ÿç¼“å­˜ä¸­ç«‹å³æ›´æ–°åˆ°ä¸»å­˜ä¸­ï¼Œå¹¶ä¸”ä½¿å…¶ä»–CPUä¸­è¯¥å˜é‡çš„ç¼“å­˜è¡Œæ— æ•ˆï¼Œå®ƒåªèƒ½ä»ä¸»å­˜ä¸­é‡æ–°è¯»å–ã€‚")])]),t._v(" "),s("ul",[s("li",[t._v("æœ‰åºæ€§ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç å…ˆåæ‰§è¡Œçš„é¡ºåºã€‚")])]),t._v(" "),s("blockquote",[s("p",[t._v("æŒ‡ä»¤é‡æ’åºï¼šä¸€èˆ¬æ¥è¯´ï¼Œå¤„ç†å™¨ä¸ºäº†æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œå¯èƒ½ä¼šå¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œå®ƒä¸ä¿è¯ç¨‹åºä¸­å„ä¸ªè¯­å¥çš„æ‰§è¡Œå…ˆåé¡ºåºåŒä»£ç ä¸­çš„é¡ºåºä¸€è‡´ï¼Œä½†æ˜¯å®ƒä¼šä¿è¯ç¨‹åºæœ€ç»ˆæ‰§è¡Œç»“æœå’Œä»£ç é¡ºåºæ‰§è¡Œçš„ç»“æœä¸€è‡´ã€‚")]),t._v(" "),s("p",[t._v("é‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ï¼Œä½†ä¼šå½±å“å¤šçº¿ç¨‹ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨Volatileå…³é”®å­—ï¼Œå¯ä»¥ä½¿åœ¨å‰é¢çš„ä»£ç ä¸€å®šåœ¨å…¶å‰é¢å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œåœ¨å…¶åé¢çš„ä»£ç ä¸€å®šéƒ½åœ¨å…¶åé¢æ‰§è¡Œå®Œæˆã€‚")])]),t._v(" "),s("h2",{attrs:{id:"volatileå…³é”®å­—å¯è§æ€§æµ‹è¯•"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volatileå…³é”®å­—å¯è§æ€§æµ‹è¯•"}},[t._v("#")]),t._v(" volatileå…³é”®å­—å¯è§æ€§æµ‹è¯•ï¼Ÿ")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" volatileTest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyData")]),t._v(" myData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyData")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),t._v(" thread "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", ä¿®æ”¹å‰: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" myData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("numberData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("InterruptedException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            myData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addTO60")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('", ä¿®æ”¹å: "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" myData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("numberData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"t1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        thread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çº¿ç¨‹2ï¼šmainçº¿ç¨‹ï¼Œçº¿ç¨‹t1ç¡çœ 3sï¼Œä¿è¯çº¿ç¨‹2è¿è¡Œåˆ°æ­¤å¤„ï¼Œä¿è¯çº¿ç¨‹2å·²ç»è¯»å–åˆ°myData.numberDataçš„å€¼çš„æ—¶å€™çº¿ç¨‹1è¿˜æ²¡å¤„ç†å®Œæ¯•ã€‚")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœçº¿ç¨‹t1ä¸ç¡çœ 3sï¼Œé‚£ä¹ˆå®ƒå¾ˆå¿«è®¡ç®—å®Œæ¯•ï¼Œå¹¶ä¿®æ”¹ä¸»å†…å­˜ä¸­çš„å€¼ï¼Œæ²¡æœ‰ç­‰åˆ°çº¿ç¨‹2è¯»å–myData.numberDatadeæ—¶ï¼ŒmyData.numberDataå°±å˜æˆäº†60ã€‚")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("numberData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Thread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('": "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" myData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("numberData"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyData")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" numberData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// volatile int numberData = 0;")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addTO60")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("numberData "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br")])]),s("h2",{attrs:{id:"volatileå…³é”®å­—çš„åŸç†"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volatileå…³é”®å­—çš„åŸç†"}},[t._v("#")]),t._v(" volatileå…³é”®å­—çš„åŸç†ï¼Ÿ")]),t._v(" "),s("p",[t._v("ğŸ“¢ **å†…å­˜å±éšœï¼ˆMemory Barrierï¼‰**åˆç§°å†…å­˜æ …æ ")]),t._v(" "),s("p",[t._v("æ˜¯ä¸€ä¸ªCPUæŒ‡ä»¤ï¼Œå…·æœ‰ä¸¤ä¸ªä½œç”¨ï¼š")]),t._v(" "),s("p",[t._v("1 ä¿è¯ç‰¹å®šæ“ä½œçš„é¡ºåºæ‰§è¡Œã€‚ç”±äºç¼–è¯‘å™¨å’Œå¤„ç†å™¨éƒ½èƒ½æ‰§è¡ŒæŒ‡ä»¤é‡æ’ä¼˜åŒ–ï¼Œå¦‚æœåœ¨æŒ‡ä»¤é—´æ’å…¥ä¸€æ¡Memory Barrieråˆ™ä¼šå‘Šè¯‰ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ï¼Œä¸ç®¡ä»€ä¹ˆæŒ‡ä»¤éƒ½ä¸èƒ½å’Œè¿™æ¡Memory BarrieræŒ‡ä»¤é‡æ–°æ’åºï¼Œä¹Ÿå°±æ˜¯è¯´"),s("strong",[t._v("é€šè¿‡æ’å…¥å†…å­˜å±éšœç¦æ­¢åœ¨å†…å­˜å±éšœå‰åçš„æŒ‡ä»¤æ‰§è¡Œé‡æ–°æ’åºä¼˜åŒ–")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("2 ä¿è¯æŸäº›å˜é‡çš„å†…å­˜å¯è§æ€§ã€‚å¼ºåˆ¶åˆ·å‡ºå„ç§CPUçš„ç¼“å­˜æ•°æ®ï¼Œå› æ­¤CPUä¸Šçš„çº¿ç¨‹éƒ½èƒ½è¯»å–åˆ°è¿™äº›æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’» å¯¹Volatileå˜é‡è¿›è¡Œ"),s("strong",[t._v("å†™æ“ä½œ")]),t._v("æ—¶ï¼š")]),t._v(" "),s("p",[t._v("ä¼šåœ¨å†™æ“ä½œååŠ å…¥ä¸€æ¡storeå±éšœæŒ‡ä»¤ï¼Œå°†å·¥ä½œå†…å­˜ä¸­çš„å…±äº«å˜é‡å€¼åˆ·æ–°å›åˆ°ä¸»å†…å­˜ã€‚")]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"E:\\java\\å…«è‚¡\\4-å¹¶å‘ç¼–ç¨‹.assets\\image-20220613170051970-16554682793601.png",alt:"image-20220613170051970"}}),t._v(" "),s("p",[t._v("ğŸ’» å¯¹Volatileå˜é‡è¿›è¡Œ"),s("strong",[t._v("è¯»æ“ä½œ")]),t._v("æ—¶ï¼š")]),t._v(" "),s("p",[t._v("ä¼šåœ¨è¯»æ“ä½œå‰åŠ å…¥ä¸€æ¡loadå±éšœæŒ‡ä»¤ï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–å…±äº«å˜é‡ã€‚")]),t._v(" "),s("img",{staticStyle:{zoom:"67%"},attrs:{src:"E:\\java\\å…«è‚¡\\4-å¹¶å‘ç¼–ç¨‹.assets\\image-20220613170206907-16554682812512.png",alt:"image-20220613170206907"}}),t._v(" "),s("h2",{attrs:{id:"è¯´è¯´synchronizedå’Œvolatileå…³é”®å­—çš„åŒºåˆ«"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¯´è¯´synchronizedå’Œvolatileå…³é”®å­—çš„åŒºåˆ«"}},[t._v("#")]),t._v(" è¯´è¯´synchronizedå’Œvolatileå…³é”®å­—çš„åŒºåˆ«ï¼Ÿ")]),t._v(" "),s("p",[t._v("ä¸¤è€…æ˜¯äº’è¡¥çš„å­˜åœ¨ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("volatileæ˜¯çº¿ç¨‹åŒæ­¥çš„è½»é‡çº§å®ç°ï¼Œæ‰€ä»¥volatileæ€§èƒ½è‚¯å®šæ¯”synchronizedå¥½ï¼Œä½†volatileåªèƒ½ç”¨äºå˜é‡ï¼Œè€Œsynchronizedå…³é”®å­—å¯ä»¥ä¿®é¥°æ–¹æ³•å’Œä»£ç å—ã€‚")]),t._v(" "),s("li",[t._v("volatileèƒ½ä¿è¯æ•°æ®çš„å¯è§æ€§ï¼Œä½†ä¸èƒ½ä¿è¯æ•°æ®çš„åŸå­æ€§ï¼›synchronizedä¸¤è€…éƒ½èƒ½ä¿è¯ã€‚")]),t._v(" "),s("li",[t._v("volatileä¸»è¦ç”¨äºè§£å†³å˜é‡åœ¨å¤šçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œè€Œsynchronizedå…³é”®å­—è§£å†³çš„æ˜¯å¤šçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹"}},[t._v("#")]),t._v(" åŒé‡æ ¡éªŒé”å®ç°å¯¹è±¡å•ä¾‹")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" singleton "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singleton "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singleton "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" singleton"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("ul",[s("li",[t._v("Volatileå…³é”®å­—ï¼šç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œæ­£å¸¸é¡ºåº 1ï¼šä¸ºsingletonåˆ†é…å†…å­˜ã€2ï¼šåˆå§‹åŒ–singletonã€3ï¼šå°†å¯¹è±¡å¼•ç”¨singletonæŒ‡å‘å†…å­˜åœ°å€ï¼›é‡æ’åºçš„é¡ºåºå¯èƒ½ä¸º1ã€3ã€2ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´singltonè¿˜æœªåˆå§‹åŒ–æ—¶"),s("code",[t._v("singleton!=null")]),t._v("ã€‚æ­¤æ—¶æ‹¿ç€singletonå»æ“ä½œå°±ä¼šå¯¼è‡´é”™è¯¯ã€‚")]),t._v(" "),s("li",[t._v("ç¬¬ä¸€æ¬¡æ ¡éªŒï¼šæ ¡éªŒæ˜¯å¦å·²ç»åˆ›å»ºå¯¹è±¡ï¼Œå¦‚æœåˆ›å»ºäº†å°±ç›´æ¥è¿”å›ï¼Œä¸åŠ é”æé«˜æ•ˆç‡ã€‚")]),t._v(" "),s("li",[t._v("ç¬¬äºŒæ¬¡æ ¡éªŒï¼šåŒæ­¥ä»£ç å—ä¸­ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦å·²ç»åˆ›å»ºï¼›å› ä¸ºå¤šçº¿ç¨‹çš„åŸå› ï¼ŒAã€Bçº¿ç¨‹å¯èƒ½ä¼šåŒæ—¶è¿è¡Œåˆ°"),s("code",[t._v("singleton==null")]),t._v("ï¼Œä¹‹åå…¶ä¸­Aè¿›å…¥åŒæ­¥ä»£ç å—ï¼ŒBç­‰å¾…ï¼ŒAåœ¨åŒæ­¥ä»£ç å—ä¸­åˆ›å»ºå®Œå¯¹è±¡åé‡Šæ”¾é”ï¼ŒBä¼šè¿›å…¥åŒæ­¥ä»£ç å—ï¼Œå¦‚æœæ­¤æ—¶ä¸è¿›è¡Œåˆ¤æ–­ï¼ŒBå°†é‡æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚")])]),t._v(" "),s("h2",{attrs:{id:"volatileèƒ½ä¸èƒ½ä¿è¯i-å®‰å…¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volatileèƒ½ä¸èƒ½ä¿è¯i-å®‰å…¨"}},[t._v("#")]),t._v(" volatileèƒ½ä¸èƒ½ä¿è¯i++å®‰å…¨ï¼Ÿ")]),t._v(" "),s("p",[t._v("ä¸èƒ½ï¼Œvolatileåªèƒ½ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ã€‚")]),t._v(" "),s("p",[t._v("i++å¹¶ä¸æ˜¯åŸå­æ“ä½œï¼Œå®ƒåˆ†ä¸º3æ­¥æ‰§è¡Œã€‚1 ä»å·¥ä½œå†…å­˜ä¸­è¯»å–iå€¼ï¼›2 è¿›è¡Œè®¡ç®—ï¼›3 å°†å€¼èµ‹å€¼ç»™iã€‚ç”¨volatileä¿®é¥°è™½ç„¶ä¿è¯äº†ä»å·¥ä½œå†…å­˜å†™å…¥ä¸»å†…å­˜åï¼Œå…¶ä»–çº¿ç¨‹å·¥ä½œå†…å­˜çš„å¯è§æ€§ã€‚ä½†æ— æ³•å½±å“å…¶ä»–çº¿ç¨‹cpuå·²æ‰§è¡Œçš„i++æ­¥éª¤ã€‚ä»è€Œå¯¼è‡´äº†ä½¿ç”¨volatileä¹Ÿä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚")]),t._v(" "),s("p",[t._v("i++æ“ä½œå¯ä»¥ä½¿ç”¨synchronizedé”ï¼Œæˆ–è€…ä½¿ç”¨AtomicIntegerã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);