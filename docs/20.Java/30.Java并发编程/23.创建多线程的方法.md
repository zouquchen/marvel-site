---
title: åˆ›å»ºå¤šçº¿ç¨‹çš„æ–¹æ³•
date: 2022-07-13 18:20:57
permalink: /pages/1d7c1d/
categories:
  - Java
  - Javaå¹¶å‘ç¼–ç¨‹
tags:
  - 
author: 
  name: Marvel
  link: https://github.com/zouquchen
---
# åˆ›å»ºå¤šçº¿ç¨‹çš„æ–¹æ³•

## 1 ç»§æ‰¿Threadåˆ›å»ºçº¿ç¨‹
1. ç»§æ‰¿Threadç±»ï¼Œé‡å†™run()æ–¹æ³•ã€‚
2. åˆ›å»ºè¯¥å­ç±»çš„å®ä¾‹
3. ä½¿ç”¨start()æ–¹æ³•å¯åŠ¨çº¿ç¨‹ã€‚
```java
public class MyThread extends Thread{
    @Override
    public void run() {
        System.out.println(Thread.currentThread().getName() + ": Running!");
    }

    public static void main(String[] args) {
        MyThread t = new MyThread();
        t.setName("t1");
        t.start();
    }
}
```
åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•

```java
public class MyThread{
    public static void main(String[] args) {
        Thread t = new Thread() {
            @Override
            public void run() {
                System.out.println(Thread.currentThread().getName() + ": Running!");
            }
        };
        t.setName("t1");
        t.start();
    }
}
```

## 2 é€šè¿‡Runableåˆ›å»ºçº¿ç¨‹
1. å®šä¹‰Runnableæ¥å£çš„å®ç°ç±»ï¼Œé‡å†™runæ–¹æ³•ï¼ˆæ‰§è¡Œä½“ï¼‰
2. åˆ›å»ºRunnableå®ç°ç±»çš„å®ä¾‹ï¼Œä»¥æ­¤å®ä¾‹ä½œä¸ºThreadçš„targetå¯¹è±¡åˆ›å»ºThreadå¯¹è±¡ã€‚
3. è°ƒç”¨start()å¯åŠ¨è¯¥çº¿ç¨‹ã€‚
> æŠŠã€çº¿ç¨‹ã€‘å’Œã€ä»»åŠ¡ã€‘ï¼ˆè¦æ‰§è¡Œçš„ä»£ç ï¼‰åˆ†å¼€
```java
public class MethodA implements Runnable{
    @Override
    public void run() {
        System.out.println(Thread.currentThread().getName() + ": Running!");
    }

    public static void main(String[] args) {
        Runnable r = new MethodA();
        Thread t1 = new Thread(r);
        t1.setName("t1");
        t1.start();
    }
}
```
åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•

```java
public class MyThread{
    public static void main(String[] args) {
        Thread t = new Thread(new Runnable() {
            @Override
            public void run() {
                System.out.println(Thread.currentThread().getName() + ": Running!");
            }
        });
        t.setName("t1");
        t.start();
    }
}
```
Lambdaè¡¨è¾¾å¼ç®€åŒ–

```java
public class MyThread{
    public static void main(String[] args) {
        Thread t = new Thread(() -> System.out.println(Thread.currentThread().getName() + ": Running!"));
        t.setName("t1");
        t.start();
    }
}
```
***
ğŸ³ **Threadä¸Runnableçš„å…³ç³»**

`Thread`å®ç°äº†`Runnable`
```javascript
class Thread implements Runnable {...}
```
æ‰€ä»¥ï¼Œåœ¨`Thread`å†…è¦å®ç°`Runnable`æ¥å£å†…çš„æ–¹æ³•`run()`ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå½“targetä¸ä¸ºç©ºæ—¶ï¼Œåœ¨`run()`æ–¹æ³•ä¸­åˆè°ƒç”¨`target.run()`ã€‚
```javascript
@Override
public void run() {
    if (target != null) {
        target.run();
    }
}
```
æ‰€ä»¥æ¥ä¸‹æ¥è¦çœ‹çœ‹`target`æ˜¯ä»€ä¹ˆï¼Œåœ¨åˆå§‹åŒ–æ–¹æ³•`init()`ä¸­ã€‚

```java
private void init(ThreadGroup g, Runnable target, String name,
                      long stackSize, AccessControlContext acc,
                      boolean inheritThreadLocals) {
	...
	this.target = target;
	...
}
```
æ‰€ä»¥ï¼Œ`target`å°±æ˜¯ä¸€ä¸ªå®ç°`Runnable`æ¥å£æ‰€åˆ›å»ºçš„å¯¹è±¡ã€‚

æ‰€ä»¥ï¼Œå¦‚æœåˆ›å»ºäº†ä¸€ä¸ª`Runnable`å¯¹è±¡ç»™Threadï¼Œé‚£ä¹ˆ`Thread`è¿è¡Œçš„å°±æ˜¯ä¸€ä¸ª`Runnable`å¯¹è±¡ä¸­çš„`run`æ–¹æ³•ï¼›å¦‚æœæ²¡åˆ›å»º`Runnable`å¯¹è±¡ï¼Œå°±éœ€è¦é‡å†™`run`æ–¹æ³•ï¼Œ`Thread`å°†è¿è¡Œè¿™ä¸ªé‡å†™çš„`run`æ–¹æ³•ã€‚
## 3 é€šè¿‡Callableå’ŒFutureTaskåˆ›å»ºçº¿ç¨‹
1. åˆ›å»ºCallableæ¥å£çš„å®ç°ç±»ï¼Œå®ç°callæ–¹æ³•ï¼ˆæ‰§è¡Œä½“ï¼Œæœ‰è¿”å›å€¼ï¼‰ï¼Œå¹¶åˆ›å»ºCallableå®ç°ç±»çš„å¯¹è±¡ã€‚
2. ä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼Œè¯¥FutureTaskå¯¹è±¡å°è£…äº†è¯¥Callableå¯¹è±¡çš„call()æ–¹æ³•çš„è¿”å›å€¼ã€‚
3. ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹ã€‚
4. è°ƒç”¨FutureTaskå¯¹è±¡çš„get()æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ã€‚
> ä¸ã€Runnableã€‘ç›¸æ¯”ï¼Œå¯ä»¥æœ‰è¿”å›å€¼ï¼Œé€šè¿‡get()æ–¹æ³•æ¥è·å¾—å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ã€‚
```java
public class MyThread{
    public static void main(String[] args) throws ExecutionException, InterruptedException {
        // åˆ›å»ºCallableæ¥å£çš„å®ç°ç±»å¯¹è±¡
        Callable<Integer> callable = new Callable<Integer>() {
            @Override
            public Integer call() throws Exception {
                System.out.println(Thread.currentThread().getName() + ": Running!");
                return 1;
            }
        };
        // ä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡
        FutureTask<Integer> task = new FutureTask<>(callable);

        // ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹
        Thread thread = new Thread(task, "t1");
        thread.start();

        // é˜»å¡è·å–ç»“æœ
        System.out.println("callæ–¹æ³•çš„è¿”å›å€¼: " + task.get());

    }
}
```

é€šè¿‡æŸ¥çœ‹Threadçš„æ„é€ å™¨ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå¯ä»¥ä¼ å…¥çš„åªæœ‰Runnableçš„å¯¹è±¡

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://raw.githubusercontent.com/zouquchen/Images/main/imgs/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E5%8E%9F%E7%90%86.png)

**é‚£å®ƒä¸ºä½•èƒ½å¤Ÿä¼ å…¥Callableå¯¹è±¡å‘¢ï¼Ÿ**

å› ä¸ºæˆ‘ä»¬ä½¿ç”¨FutureTaskç±»æ¥åŒ…è£…Callableå¯¹è±¡ï¼ŒåŒæ—¶FutureTaské—´æ¥å®ç°äº†Runnableæ¥å£ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://raw.githubusercontent.com/zouquchen/Images/main/imgs/FutureTask%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB.png)

## 4 çº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹
### 4.1 çº¿ç¨‹å‚æ•°è¯´æ˜

```java
/**
* ç”¨ç»™å®šçš„åˆå§‹å‚æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ThreadPoolExecutorã€‚
*/
public ThreadPoolExecutor(int corePoolSize,//çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°é‡
                          int maximumPoolSize,//çº¿ç¨‹æ± çš„æœ€å¤§çº¿ç¨‹æ•°
                          long keepAliveTime,//å½“çº¿ç¨‹æ•°å¤§äºæ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œå¤šä½™çš„ç©ºé—²çº¿ç¨‹å­˜æ´»çš„æœ€é•¿æ—¶é—´
                          TimeUnit unit,//æ—¶é—´å•ä½
                          BlockingQueue<Runnable> workQueue,//ä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨æ¥å‚¨å­˜ç­‰å¾…æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—
                          ThreadFactory threadFactory,//çº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹ï¼Œä¸€èˆ¬é»˜è®¤å³å¯
                          RejectedExecutionHandler handler//æ‹’ç»ç­–ç•¥ï¼Œå½“æäº¤çš„ä»»åŠ¡è¿‡å¤šè€Œä¸èƒ½åŠæ—¶å¤„ç†æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®šåˆ¶ç­–ç•¥æ¥å¤„ç†ä»»åŠ¡
                         ) {
    if (corePoolSize < 0 ||
        maximumPoolSize <= 0 ||
        maximumPoolSize < corePoolSize ||
        keepAliveTime < 0)
        throw new IllegalArgumentException();
    if (workQueue == null || threadFactory == null || handler == null)
        throw new NullPointerException();
    this.corePoolSize = corePoolSize;
    this.maximumPoolSize = maximumPoolSize;
    this.workQueue = workQueue;
    this.keepAliveTime = unit.toNanos(keepAliveTime);
    this.threadFactory = threadFactory;
    this.handler = handler;
}
```
ğŸš© **é‡è¦å‚æ•°**

- corePoolSizeï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡ï¼Œå®ƒçš„æ•°é‡å†³å®šäº†æ·»åŠ çš„ä»»åŠ¡æ˜¯å¼€è¾Ÿæ–°çš„çº¿ç¨‹å»æ‰§è¡Œï¼Œè¿˜æ˜¯æ”¾åˆ°workQueueä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚
- maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°é‡ï¼Œè¿™ä¸ªå‚æ•°ä¼šæ ¹æ®ä½ ä½¿ç”¨çš„workQueueä»»åŠ¡é˜Ÿåˆ—çš„ç±»å‹ï¼Œå†³å®šçº¿ç¨‹æ± ä¼šå¼€è¾Ÿçš„æœ€å¤§çº¿ç¨‹æ•°é‡ã€‚
- keepAliveTimeï¼šå½“å‰çº¿ç¨‹æ± ä¸­ç©ºé—²çº¿ç¨‹æ•°é‡è¶…è¿‡corePoolSizeæ—¶ï¼Œå¤šä½™çš„çº¿ç¨‹ä¼šå¤šé•¿æ—¶é—´å†…è¢«é”€æ¯ã€‚
- unitï¼škeepAliveTimeçš„å•ä½
- workQueueï¼šä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨ç­‰å¾…æ‰§è¡Œä»»åŠ¡çš„é˜Ÿåˆ—ï¼›å®ƒä¸€èˆ¬åˆ†ä¸ºç›´æ¥æäº¤é˜Ÿåˆ—ã€æœ‰ç•Œä»»åŠ¡é˜Ÿåˆ—ã€æ— ç•Œä»»åŠ¡é˜Ÿåˆ—ã€ä¼˜å…ˆé˜Ÿåˆ—ã€‚
- threadFactoryï¼šçº¿ç¨‹å·¥å‚ï¼Œç”¨äºçº¿ç¨‹åˆ›å»ºï¼Œä¸€èˆ¬é»˜è®¤å³å¯ã€‚
- handlerï¼šæ‹’ç»ç­–ç•¥ï¼›å½“ä»»åŠ¡å¤ªå¤šæ¥ä¸åŠå¤„ç†æ—¶ï¼Œå¯ä»¥å®šåˆ¶ç­–ç•¥æ¥å¤„ç†ä»»åŠ¡ã€‚

ğŸ§­ **æ ¸å¿ƒçº¿ç¨‹æ•°é‡å’Œæœ€å¤§çº¿ç¨‹æ•°é‡**

- æäº¤çš„æ–°ä»»åŠ¡å°‘äºcorePoolSizeï¼Œå³ä½¿å…¶ä»–å·¥ä½œçº¿ç¨‹å¤„äºç©ºé—²çŠ¶æ€ï¼Œä¹Ÿä¼šåˆ›å»ºæ–°çº¿ç¨‹å¤„ç†ã€‚

- æäº¤çš„æ–°ä»»åŠ¡å¤§äºcorePoolSizeï¼Œå°äºmaximumPoolSizeï¼Œåªæœ‰å½“é˜Ÿåˆ—å·²æ»¡æ—¶æ‰ä¼šåˆ›å»ºæ–°çº¿ç¨‹
- é€šè¿‡è®¾ç½®corePoolSizeå’ŒmaximumPoolSizeç›¸åŒï¼Œå¯ä»¥åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ã€‚
- å°†maximumPoolSizeè®¾ç½®ä¸ºInteger.MAX_VALUEï¼Œå¯ä»¥å®¹çº³ä»»æ„æ•°é‡çš„å¹¶å‘æ•°é‡ã€‚
- å¯ä»¥ä½¿ç”¨setCorePoolSizeå’ŒsetMaximumSizeè¿›è¡ŒåŠ¨æ€æ›´æ”¹ã€‚
- å½“çº¿ç¨‹æ•°é‡è¾¾åˆ°maximumPoolSizeä¸”ç­‰å¾…é˜Ÿåˆ—å·²æ»¡æ—¶å¼€å§‹æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://raw.githubusercontent.com/zouquchen/Images/main/imgs/Thread%E6%9E%84%E9%80%A0%E5%99%A8API.png)
ğŸš€ **ä»»åŠ¡é˜Ÿåˆ—workQueue**

1. ç›´æ¥æäº¤é˜Ÿåˆ—ï¼ŒSynchronousQueueæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„BlockingQueueï¼Œä»–æ²¡æœ‰å®¹é‡ï¼Œæäº¤çš„ä»»åŠ¡ä¸ä¼šè¢«ä¿å­˜ï¼Œæ€»æ˜¯ä¼šé©¬ä¸Šæäº¤æ‰§è¡Œï¼Œæ¯æ‰§è¡Œä¸€ä¸ªæ’å…¥æ“ä½œå°±ä¼šé˜»å¡ï¼Œéœ€è¦å†æ‰§è¡Œä¸€ä¸ªåˆ é™¤æ“ä½œæ‰ä¼šè¢«å”¤é†’ï¼Œåä¹‹æ¯ä¸€ä¸ªåˆ é™¤æ“ä½œä¹Ÿéƒ½è¦ç­‰å¾…å¯¹åº”çš„æ’å…¥æ“ä½œã€‚
2. æœ‰ç•Œçš„ä»»åŠ¡é˜Ÿåˆ—ï¼ŒArrayBlockingQueueï¼Œè‹¥æœ‰æ–°çš„ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œçº¿ç¨‹æ± ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œç›´åˆ°åˆ›å»ºæ•°é‡è¾¾åˆ°corePoolSzieæ—¶ï¼Œåˆ™ä¼šå°†æ–°çš„ä»»åŠ¡åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚è‹¥å¤šåˆ—å·²æ»¡ï¼Œåˆ™ç»§ç»­åˆ›å»ºçº¿ç¨‹æ•°é‡è¾¾åˆ°maximumPoolSizeï¼Œè‹¥çº¿ç¨‹æ•°é‡å¤§äºmaximumuPoolSizeï¼Œåˆ™æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚
3. æ— ç•Œä»»åŠ¡é˜Ÿåˆ—ï¼ŒLinkedBlockingQueueï¼Œä»»åŠ¡é˜Ÿåˆ—å¯ä»¥æ— é™åˆ¶çš„æ·»åŠ æ–°çš„ä»»åŠ¡ï¼Œçº¿ç¨‹æ± åˆ›å»ºçš„æœ€å¤§æ•°é‡æ˜¯corePoolSizeï¼ŒmaximumPoolSizeè¿™ä¸ªå‚æ•°æ˜¯æ— æ•ˆçš„ã€‚ï¼ˆä¸è®¾ç½®å®¹é‡æ—¶ï¼Œé»˜è®¤å¤§å°ä¸ºInteger.MAX_VALUEï¼Œå¯ä»¥çœ‹æˆæ— ç•Œï¼‰
4. ä¼˜å…ˆä»»åŠ¡é˜Ÿåˆ—ï¼ŒProrityBlockingQueueï¼Œç‰¹æ®Šçš„æ— ç•Œé˜Ÿåˆ—ï¼Œçº¿ç¨‹æ± åˆ›å»ºçš„æœ€å¤§æ•°é‡æ˜¯corePoolSizeï¼ŒmaximumPoolSizeè¿™ä¸ªå‚æ•°æ˜¯æ— æ•ˆçš„ã€‚ä¸€èˆ¬é˜Ÿåˆ—æ˜¯æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„è§„åˆ™å¤„ç†ä»»åŠ¡ï¼Œè€Œè¯¥é˜Ÿåˆ—å¯ä»¥è‡ªå®šä¹‰è§„åˆ™æ ¹æ®ä¼˜å…ˆçº§é¡ºåºå…ˆåæ‰§è¡Œã€‚

ğŸš¨ **æ‹’ç»ç­–ç•¥**

é˜Ÿåˆ—å·²æ»¡ä¸”çº¿ç¨‹æ± åˆ›å»ºçš„çº¿ç¨‹æ•°é‡è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°æ—¶ï¼Œéœ€è¦æŒ‡å®šæ‹’ç»ç­–ç•¥æ¥å¤„ç†çº¿ç¨‹æ± è¶…è½½çš„æƒ…å†µã€‚

1. AbortPolicyç­–ç•¥ï¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸ï¼Œé˜»æ­¢ç³»ç»Ÿæ­£å¸¸å·¥ä½œã€‚
2. CallerRunsPolicyç­–ç•¥ï¼šå¦‚æœçº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡è¾¾åˆ°ä¸Šé™ï¼Œè¯¥ç­–ç•¥ä¼šæŠŠä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ”¾åœ¨è°ƒç”¨è€…çº¿ç¨‹å½“ä¸­è¿è¡Œã€‚
3. DiscardOldestPolicyç­–ç•¥ï¼šä¸¢å¼ƒä»»åŠ¡é˜Ÿåˆ—ä¸­æœ€è€çš„ä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶å°è¯•å†æ¬¡æäº¤ã€‚
4. DiscardPolicyç­–ç•¥ï¼šç›´æ¥å°†ä»»åŠ¡ä¸¢å¼ƒã€‚

ğŸ“‘ **å…³é—­çº¿ç¨‹æ± **

shutdownNow()ï¼šç«‹å³å…³é—­çº¿ç¨‹æ± (æš´åŠ›)ï¼Œæ­£åœ¨æ‰§è¡Œä¸­çš„åŠé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¼šè¢«ä¸­æ–­ï¼ŒåŒæ—¶è¯¥æ–¹æ³•ä¼šè¿”å›è¢«ä¸­æ–­çš„é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡åˆ—è¡¨
shutdown()ï¼šå¹³æ»‘å…³é—­çº¿ç¨‹æ± ï¼Œæ­£åœ¨æ‰§è¡Œä¸­çš„åŠé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡èƒ½æ‰§è¡Œå®Œæˆï¼Œåç»­è¿›æ¥çš„ä»»åŠ¡ä¼šè¢«æ‰§è¡Œæ‹’ç»ç­–ç•¥
isTerminated()ï¼šå½“æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡åŠå¯¹åˆ—ä¸­çš„ä»»åŠ¡å…¨éƒ¨éƒ½æ‰§è¡Œï¼ˆæ¸…ç©ºï¼‰å®Œå°±ä¼šè¿”å›true

### 4.2 åˆ›å»ºçº¿ç¨‹
çº¿ç¨‹æ± å¯ä»¥è‡ªåŠ¨åˆ›å»ºä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œè‡ªåŠ¨åˆ›å»ºä½“ç°åœ¨Executorså·¥å…·ç±»ä¸­ï¼Œå¸¸è§çš„å¯ä»¥åˆ›å»ºnewFixedThreadPoolã€newCachedThreadPoolã€newSingleThreadExecutorã€newScheduledThreadPoolï¼›

æ‰‹åŠ¨åˆ›å»ºä½“ç°åœ¨å¯ä»¥çµæ´»è®¾ç½®çº¿ç¨‹æ± çš„å„ä¸ªå‚æ•°ï¼Œä½“ç°åœ¨ä»£ç ä¸­å³ThreadPoolExecutorç±»æ„é€ å™¨ä¸Šå„ä¸ªå®å‚çš„ä¸åŒã€‚
#### 4.2.1 newFixedThreadPool()
åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± 

```java
Executors.newFixedThreadPool(2)
```
æµ‹è¯•ä»£ç ï¼š
```java
public class MyThread{

    public static void main(String[] args) {
    	// åˆ›å»ºæœ€å¤šå«æœ‰2ä¸ªçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± ã€‚ 
        ExecutorService executorService = Executors.newFixedThreadPool(2);
        for (int i = 0; i < 10; i++) {
            executorService.execute(new MethodA());
        }
    }
}

```

ä½¿ç”¨çš„æ„é€ æ–¹å¼ä¸º

```java
new ThreadPoolExecutor(var0, var0, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue())
```

è®¾ç½®äº†corePoolSize=maxPoolSizeï¼ŒkeepAliveTime=0(æ­¤æ—¶è¯¥å‚æ•°æ²¡ä½œç”¨)ï¼Œæ— ç•Œé˜Ÿåˆ—ï¼Œä»»åŠ¡å¯ä»¥æ— é™æ”¾å…¥ï¼Œå½“è¯·æ±‚è¿‡å¤šæ—¶(ä»»åŠ¡å¤„ç†é€Ÿåº¦è·Ÿä¸ä¸Šä»»åŠ¡æäº¤é€Ÿåº¦é€ æˆè¯·æ±‚å †ç§¯)å¯èƒ½å¯¼è‡´å ç”¨è¿‡å¤šå†…å­˜æˆ–ç›´æ¥å¯¼è‡´OOMå¼‚å¸¸

#### 4.2.2 newSingleThreadExecutor()
åˆ›å»ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± 

```java
Executors.newSingleThreadExecutor()
```
æµ‹è¯•ä»£ç ï¼š
```java
public class MyThread{

    public static void main(String[] args) {
        ExecutorService executorService = Executors.newSingleThreadExecutor();
        for (int i = 0; i < 10; i++) {
            executorService.execute(new MethodA());
        }
    }
}
```
ä½¿ç”¨çš„æ„é€ æ–¹å¼ä¸º

```java
new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue(), var0)
```

åŸºæœ¬åŒnewFixedThreadPoolï¼Œä½†æ˜¯å°†çº¿ç¨‹æ•°è®¾ç½®ä¸ºäº†1ï¼Œå•çº¿ç¨‹ï¼Œå¼Šç«¯å’ŒnewFixedThreadPoolä¸€è‡´ã€‚
#### 4.2.3 newCachedThreadPool()
åˆ›å»ºä¸€ä¸ªä¸é™çº¿ç¨‹æ•°ä¸Šé™çš„çº¿ç¨‹æ± ï¼Œä»»ä½•æäº¤çš„ä»»åŠ¡éƒ½å°†ç«‹å³æ‰§è¡Œ

```java
Executors.newCachedThreadPool();
```
æµ‹è¯•ä»£ç ï¼š
```java
public class MyThread{

    public static void main(String[] args) {
        ExecutorService executorService = Executors.newCachedThreadPool();
        for (int i = 0; i < 10; i++) {
            executorService.execute(new MethodA());
        }
    }
}
```
ä½¿ç”¨çš„æ„é€ æ–¹å¼ä¸º

```java
new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue())
```
corePoolSize=0ï¼ŒmaxPoolSizeä¸ºå¾ˆå¤§çš„æ•°ï¼ŒåŒæ­¥ç§»äº¤é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç»´æŠ¤å¸¸é©»çº¿ç¨‹(æ ¸å¿ƒçº¿ç¨‹)ï¼Œæ¯æ¬¡æ¥è¯·æ±‚ç›´æ¥åˆ›å»ºæ–°çº¿ç¨‹æ¥å¤„ç†ä»»åŠ¡ï¼Œä¹Ÿä¸ä½¿ç”¨é˜Ÿåˆ—ç¼“å†²ï¼Œä¼šè‡ªåŠ¨å›æ”¶å¤šä½™çº¿ç¨‹ï¼Œç”±äºå°†maxPoolSizeè®¾ç½®æˆInteger.MAX_VALUEï¼Œå½“è¯·æ±‚å¾ˆå¤šæ—¶å°±å¯èƒ½åˆ›å»ºè¿‡å¤šçš„çº¿ç¨‹ï¼Œå¯¼è‡´èµ„æºè€—å°½OOM

#### 4.2.4 newScheduledThreadPool()
æ”¯æŒå®šæ—¶å‘¨æœŸæ€§æ‰§è¡Œï¼Œæ³¨æ„ä¸€ä¸‹ä½¿ç”¨çš„æ˜¯å»¶è¿Ÿé˜Ÿåˆ—
```java
Executors.newScheduledThreadPool(2)
```
æµ‹è¯•ä»£ç ï¼š
```java
public class MyThread{

    public static void main(String[] args) {
        ExecutorService executorService = Executors.newScheduledThreadPool(2);
        for (int i = 0; i < 10; i++) {
            executorService.execute(new MethodA());
        }
    }
}
```

ä½¿ç”¨çš„æ„é€ æ–¹å¼ä¸º

```java
new ThreadPoolExecutor(var1, Integer.MAX_VALUE, 0L, TimeUnit.NANOSECONDS, new ScheduledThreadPoolExecutor.DelayedWorkQueue())
```

æ”¯æŒå®šæ—¶å‘¨æœŸæ€§æ‰§è¡Œï¼Œæ³¨æ„ä¸€ä¸‹ä½¿ç”¨çš„æ˜¯å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå¼Šç«¯åŒnewCachedThreadPoolä¸€è‡´
